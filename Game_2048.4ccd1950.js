!function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(t,r){if(t){if("string"==typeof t)return e(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(t,void 0)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e){return Math.floor(Math.random()*e)}function n(e,t){return e.length===t.length&&e.every(function(e,r){return e===t[r]})}var o,l=new(function(){var e;function o(e){if(!(this instanceof o))throw TypeError("Cannot call a class as a function");console.log(e)}return e=[{key:"moveRight",value:function(){this.moveHorizontally("right")}},{key:"moveLeft",value:function(){this.moveHorizontally("left")}},{key:"moveUp",value:function(){this.moveVertically("up")}},{key:"moveDown",value:function(){this.moveVertically("down")}},{key:"getScore",value:function(e){var t=document.querySelector(".game-score"),r=parseInt(t.innerHTML)||0;t.innerHTML=r+e}},{key:"getState",value:function(){for(var e=document.querySelector("tbody").rows,t=[],r=0;r<e.length;r++){t[r]=[];for(var n=0;n<e[r].cells.length;n++){var o=e[r].cells[n];t[r].push(parseInt(o.innerHTML)||0)}}return t}},{key:"getStatus",value:function(){return this.hasWon()?"win":this.hasLose()?"lose":this.isPlaying()?"playing":this.isIdle()?"idle":void 0}},{key:"setStatus",value:function(e){return e}},{key:"hasWon",value:function(){for(var e=document.querySelector("tbody").rows,t=0;t<e.length;t++)for(var r=e[t].cells,n=0;n<r.length;n++)if(2048===parseInt(r[n].innerHTML))return!0;return!1}},{key:"hasLose",value:function(){for(var e=document.querySelector("tbody").rows,t=[],r=0;r<e.length;r++){t[r]=[];for(var n=e[r].cells,o=0;o<n.length;o++)t[r][o]=parseInt(n[o].innerHTML)||0}for(var l=0;l<t.length;l++)for(var a=0;a<t[l].length;a++)if(0===t[l][a])return!1;for(var i=0;i<t.length;i++)for(var s=0;s<t[i].length-1;s++)if(t[i][s]===t[i][s+1])return!1;for(var c=0;c<t.length-1;c++)for(var u=0;u<t.length-1;u++)if(t[c][u]===t[c+1][u])return!1;return!0}},{key:"isIdle",value:function(){for(var e=document.querySelectorAll("tbody td"),t=0;t<e.length;t++)if(parseInt(e[t].innerHTML)>0)return!1;return!0}},{key:"isPlaying",value:function(){var e=this.isIdle(),t=this.hasLose(),r=this.hasWon();return!e&&!t&&!r}},{key:"start",value:function(){var e,t,n=document.querySelector(".button.start");n.classList.add("restart"),n.classList.remove("start"),n.textContent="Restart";for(var o=Array.from(document.querySelectorAll(".field-cell")),l=new Set;2!==l.size;)l=new Set([e=o[r(o.length)],t=o[r(o.length)]]);2===l.size&&(e.classList.add("field-cell--2"),e.innerHTML="2",t.classList.add("field-cell--2"),t.innerHTML="2");var a=document.querySelector(".message-start");a&&a.remove()}},{key:"restart",value:function(){var e=document.querySelector(".button.restart");e.classList.remove("restart"),e.classList.add("start"),e.textContent="Start",Array.from(document.querySelectorAll(".field-cell")).forEach(function(e){e.className="field-cell",e.innerHTML=""});var t=document.querySelector(".lose-window");t&&t.remove();var r=document.querySelector(".win-window");r&&r.remove();var n=document.querySelector(".game-score");n&&(n.innerHTML="0"),this.setStatus("playing");var o=document.createElement("p");o.className="message message-start",o.innerHTML='Press "Start" to begin game. Good luck!',document.querySelector(".message-container").appendChild(o)}},{key:"addNewCell",value:function(){var e=Array.from(document.querySelectorAll("tbody td")).filter(function(e){return""===e.textContent.trim()});if(e.length>0){var t=e[r(e.length)],n=r(2);0===n?(t.innerHTML="2",t.classList.add("field-cell--2")):1===n&&(t.innerHTML="4",t.classList.add("field-cell--4"))}}},{key:"moveHorizontally",value:function(e){for(var r=this.getState(),o=[],l=document.querySelector("tbody").rows,a=0,i=!1,s=0;s<r.length;s++){var c=r[s].slice(),u=t(c);c=c.filter(function(e){return e>0});for(var f=0;f<c.length-1;f++)c[f]===c[f+1]&&(c[f]*=2,a+=c[f],i=!0,c[f+1]=0);for(c=c.filter(function(e){return e>0});4!==c.length;)"right"===e?c.unshift(0):"left"===e&&c.push(0);o.push(c),n(u,c)||(i=!0)}for(var d=0;d<o.length;d++)for(var v=0;v<o[d].length;v++)l[d].cells[v].innerHTML=o[d][v]>0?"".concat(o[d][v]):"",l[d].cells[v].className="field-cell",o[d][v]>0&&l[d].cells[v].classList.add("field-cell--".concat(o[d][v]));this.getScore(a),i&&this.addNewCell()}},{key:"moveVertically",value:function(e){for(var r=this.getState(),o=[],l=document.querySelector("tbody").rows,a=0,i=!1,s=0;s<r[0].length;s++){for(var c=[],u=0;u<r.length;u++)c.push(r[u][s]);var f=t(c=c.slice());c=c.filter(function(e){return e>0});for(var d=0;d<c.length-1;d++)c[d]===c[d+1]&&(c[d]*=2,a+=c[d],i=!0,c[d+1]=0);for(c=c.filter(function(e){return e>0});4!==c.length;)"down"===e?c.unshift(0):"up"===e&&c.push(0);for(var v=0;v<r.length;v++)o[v]=o[v]||[],o[v][s]=c[v];n(f,c)||(i=!0)}for(var y=0;y<o.length;y++)for(var h=0;h<o[y].length;h++)l[y].cells[h].innerHTML=o[y][h]>0?"".concat(o[y][h]):"",l[y].cells[h].className="field-cell",o[y][h]>0&&l[y].cells[h].classList.add("field-cell--".concat(o[y][h]));this.getScore(a),i&&this.addNewCell()}},{key:"loseWindow",value:function(){var e=document.createElement("div");e.className="lose-window";var t=document.createElement("h2");t.textContent="You lose! Try again.",e.appendChild(t),document.body.appendChild(e)}},{key:"winWindow",value:function(){var e=document.createElement("div");e.className="win-window";var t=document.createElement("h2");t.textContent="You won! Congratulation!.",e.appendChild(t),document.body.appendChild(e)}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(o.prototype,e),o}()),a=document.querySelector(".button");function i(){clearInterval(o),o=setInterval(function(){var e=l.getStatus();"win"===e?(l.winWindow(),clearInterval(o)):"lose"===e&&(l.loseWindow(),clearInterval(o))},100)}a&&a.addEventListener("click",function(){a.classList.contains("start")?(l.start(),l.setStatus("playing"),i()):a.classList.contains("restart")&&(l.restart(),l.setStatus("idle"),i())}),document.addEventListener("keydown",function(e){l.isPlaying()&&("ArrowLeft"===e.key?l.moveLeft():"ArrowRight"===e.key?l.moveRight():"ArrowUp"===e.key?l.moveUp():"ArrowDown"===e.key&&l.moveDown())})}();
//# sourceMappingURL=Game_2048.4ccd1950.js.map
